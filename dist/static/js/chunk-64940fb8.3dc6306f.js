(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-64940fb8"],{"2a39":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("添加心理测试")]),o("el-dialog",{attrs:{title:"添加心理测试",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{ref:"addFormRef",attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"测试名称","label-width":t.formLabelWidth,prop:"name"}},[o("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),o("el-form-item",{attrs:{label:"测试简介","label-width":t.formLabelWidth,prop:"introduction"}},[o("el-input",{model:{value:t.form.introduction,callback:function(e){t.$set(t.form,"introduction",e)},expression:"form.introduction"}})],1),o("el-form-item",{attrs:{label:"测试类别","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择测试类别"},model:{value:t.form.category_id,callback:function(e){t.$set(t.form,"category_id",e)},expression:"form.category_id"}},t._l(t.categoryList,(function(t){return o("el-option",{key:t.category_id,attrs:{value:t.category_id,label:t.category_name}})})),1)],1),o("el-form-item",{attrs:{label:"选择测试详情图片","label-width":t.formLabelWidth}},[o("el-upload",{attrs:{action:"form.action","http-request":t.modeUpload}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v("选择图片")])],1)],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.addPsyTest}},[t._v("确 定")])],1)],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"Loading",border:"","highlight-current-row":""}},[o("el-table-column",{attrs:{align:"center",label:"序号",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.$index+1)+" ")]}}])}),o("el-table-column",{attrs:{label:"测试名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.name||"--")+" ")]}}])}),o("el-table-column",{attrs:{label:"测试简介",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.introduction||"--")+" ")]}}])}),o("el-table-column",{attrs:{label:"测试分类",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.category||"--")+" ")]}}])}),o("el-table-column",{attrs:{label:"操作",align:"center",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"danger"},on:{click:function(o){return t.delPsyTest(e.row.test_id)}}},[t._v("删除")])]}}])})],1)],1)},a=[],n=(o("b0c0"),{data:function(){return{list:null,listLoading:!1,dialogFormVisible:!1,categoryList:[],form:{name:"",introduction:"",action:"http://www.rexjoush.com:3000/webapp/discover/addPsyTest",category_id:""},formLabelWidth:"130px"}},created:function(){this.getTestList(),this.getCategoryList()},methods:{getCategoryList:function(){var t=this;this.$api.getCategoryList().then((function(e){var o=e.data.data;t.categoryList=o,console.log("getCategoryList",t.categoryList)}))},getTestList:function(){var t=this;this.listLoading=!1,this.$api.getTestList().then((function(e){var o=e.data.data;t.list=o,t.listLoading=!1})).catch((function(t){console.log("err",t)}))},delPsyTest:function(t){var e=this;this.$confirm("确认删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(o){e.$api.delPsyTest({test_id:t}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.getTestList()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},addPsyTest:function(){var t=this;this.dialogFormVisible=!1;var e=new FormData;e.append("details_img_url",this.mode),e.append("name",this.form.name),e.append("introduction",this.form.introduction),e.append("category_id",this.form.category_id),this.$api.addPsyTest(e).then((function(e){t.$message({type:"success",message:"上传成功!"}),t.getCourseList()})).catch((function(t){console.log(t)}))},modeUpload:function(t){this.mode=t.file}}}),l=n,s=(o("cecf"),o("2877")),r=Object(s["a"])(l,i,a,!1,null,"9f2159c6",null);e["default"]=r.exports},cecf:function(t,e,o){"use strict";var i=o("fca9"),a=o.n(i);a.a},fca9:function(t,e,o){}}]);